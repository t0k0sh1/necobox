# プルリクエスト確認とレビュー指摘修正コマンド

このコマンドは、プルリクエストのレビューコメントを確認し、指摘事項を修正する際に使用します。

## 実行前の確認事項

1. **プルリクエストの特定**

   - リポジトリのオーナー名とリポジトリ名を確認する
   - プルリクエスト番号を確認する
   - 現在のブランチが正しいことを確認する

2. **環境の準備**
   - 最新のベースブランチを取り込んでいる
   - ローカル環境で変更をテストできる状態である

## レビューコメントの確認手順

### 1. プルリクエスト情報の取得

GitHub MCP ツールが利用可能な場合は、以下の情報を取得する：

- プルリクエストの詳細情報
- レビューコメントの一覧
- レビューコメントの詳細（ファイルパス、行番号、コメント内容）
- ステータスチェックの結果

### 2. レビューコメントの分類

レビューコメントを以下のカテゴリに分類する：

- **必須修正**: バグやセキュリティ問題など、必ず修正が必要なもの
- **推奨修正**: コード品質やパフォーマンス改善など、修正が推奨されるもの
- **質問・確認**: 意図の確認や説明が必要なもの
- **承認**: 特に問題がないもの

### 3. コメントの理解

各コメントについて以下を確認する：

- 指摘されている問題点の内容
- 修正すべき箇所（ファイルパス、行番号）
- 修正方法の提案（コメントに含まれている場合）
- 関連する他のファイルへの影響

## 修正の実施手順

### 1. 修正計画の立案

- 修正の優先順位を決定する（必須修正を最優先）
- 修正の影響範囲を確認する
- 修正方法を検討する

### 2. コードの修正

- 指摘された箇所を特定する
- 適切な修正を実施する
- 関連するテストも更新する（必要に応じて）

### 3. 修正内容の確認

- 修正後のコードが正しく動作することを確認する
- リンターエラーや型エラーがないことを確認する
- テストがすべて通過することを確認する
- 他の機能に影響がないことを確認する

### 4. コミットとプッシュ

- 修正内容をコミットする（コミットメッセージは日本語で記述）
- コミットメッセージには、修正したレビューコメントへの参照を含める
- 変更をリモートブランチにプッシュする

### 5. レビューコメントへの返信

- 修正が完了したことをレビューコメントに返信する
- 修正内容の説明を追加する（必要に応じて）
- 質問や確認事項には適切に回答する

## 修正時の注意事項

### 必須修正の対応

- 必須修正は必ず対応すること
- 修正が難しい場合は、レビュアーに相談すること
- 修正完了後、必ず動作確認を行うこと

### 推奨修正の対応

- 推奨修正は可能な限り対応すること
- 対応しない場合は、理由をレビューコメントに記載すること
- 将来的な改善として記録しておく（必要に応じて）

### 質問・確認への対応

- 質問には明確に回答すること
- コードの意図を説明すること
- 必要に応じて、コードコメントを追加すること

### コミットメッセージの書き方

- 修正内容が明確にわかるように記述する
- レビューコメントへの参照を含める（例: `fix: レビュー指摘を修正 #123`）
- 日本語で記述する

## 修正完了後の確認

- [ ] すべての必須修正が対応されている
- [ ] 修正後のコードが正しく動作する
- [ ] リンターエラーや型エラーがない
- [ ] テストがすべて通過する
- [ ] レビューコメントに適切に返信している
- [ ] 変更がリモートブランチにプッシュされている

## よくある修正パターン

### コードスタイルの修正

- インデントやフォーマットの統一
- 命名規則の統一
- 不要なコードの削除

### バグ修正

- ロジックエラーの修正
- エラーハンドリングの追加
- エッジケースの対応

### パフォーマンス改善

- 不要な処理の削除
- アルゴリズムの最適化
- メモリリークの修正

### セキュリティ対策

- 入力値の検証
- SQL インジェクション対策
- XSS 対策

### テストの追加・修正

- 不足しているテストケースの追加
- テストコードの修正
- カバレッジの向上
